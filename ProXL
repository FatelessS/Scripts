local player = game.Players.LocalPlayer
local char = player.Character

local function quest()
    pcall(function()
    for i,v in pairs(game:GetService("ReplicatedStorage").Quests:GetChildren()) do
    if v.Value:find(_G.Mob) then
        return game:GetService("ReplicatedStorage").RemoteEvents.ChangeQuestRemote:FireServer(game:GetService("ReplicatedStorage").Quests[v.Name])
    end
    end
    end)
end

 function check()
    for i,v in pairs(_G.Races) do 
        if game.Players.LocalPlayer.PlayerValues.Race.Value == tostring(v) then return true
        end
    end
    return false
end

spawn(function()
game:GetService('RunService').Stepped:connect(function()
setsimulationradius(math.huge,math.huge)
workspace.FallenPartsDestroyHeight = math.huge-math.huge
end)
end)

spawn(function()
while true do game:GetService("RunService").Heartbeat:wait()
    if shared.Enabled then
        pcall(function()
    for i,v in pairs(game:GetService("Workspace").Live[_G.Mob]:GetChildren()) do
        if char.Humanoid.Health > 0 and v.Humanoid.Health > 0 and v:FindFirstChild("Humanoid") and v:FindFirstChild("HumanoidRootPart") then
        char.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame
        if char:FindFirstChild(tostring(game:GetService("Players").LocalPlayer.PlayerValues.Ability.Value)) then
        game:GetService("ReplicatedStorage").RemoteEvents.BladeCombatRemote:FireServer(true)
        end
        v.Humanoid.HealthChanged:Connect(function()
        v.Humanoid.Health = 0
        end)
        end
    end
    end)
    end
end
end)

spawn(function()
    while true do wait()
        if shared.Enabled then
            pcall(function()
        for i,v in pairs(player.Backpack:GetChildren()) do
            if v:FindFirstChild("Combat Script") then
                player.Backpack[game:GetService("Players").LocalPlayer.PlayerValues.Ability.Value].Parent = game.Players.LocalPlayer.Character
                end
            end
        end)
        end
        end
end)

spawn(function()
    while true do wait()
        if shared.Enabled then
        if not player.PlayerGui.Menu.QuestFrame.Visible then
            quest()
        end
       end
        end
end)

spawn(function()
    while true do wait()
        pcall(function()
        game:GetService("Workspace").LocalPlayer.Character.Head.Overhead:Remove()
        end)
        end
end)

spawn(function()
     while wait(.4) do
        if shared.Enabled and not check() then
            pcall(function()
            if game.Players.LocalPlayer.Backpack:FindFirstChild("Heart") then
                game.Players.LocalPlayer.Character.Humanoid:EquipTool(game.Players.LocalPlayer.Backpack.Heart)
            wait(.2)
                game:GetService("ReplicatedStorage").RemoteEvents.ItemRemote:FireServer()
        elseif not game.Players.LocalPlayer.Backpack:FindFirstChild("Heart") then
            game:GetService("ReplicatedStorage").RemoteEvents.BuyItemRemote:FireServer("Heart")
        end
        end)
        end
    end
end)
